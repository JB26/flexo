#!/bin/bash

set -o pipefail

OUTPUT_FILE="/tmp/flexo_test_output"

function print_output() {
  echo "================================="
  echo "Test summary:"
  grep flexo-test $OUTPUT_FILE
}

if /root/flexo_test | tee $OUTPUT_FILE; then
  echo 'All test cases have succeeded!'
  print_output
else
  echo 'A test case has failed!'
  print_output
  # exit 1
  # Using tail allows us to keep the container running: This can be helpful because it allows us to run an
  # interactive shell on the container and troubleshoot the failing test case.
  /usr/bin/tail -f /dev/null
fi



